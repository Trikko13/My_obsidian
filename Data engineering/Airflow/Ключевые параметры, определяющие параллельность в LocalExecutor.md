1. **`parallelism`**:
    
    - Максимальное общее количество задач, которые Airflow может выполнять одновременно (все DAG'и вместе).
    - Настраивается в `airflow.cfg`:
        
        `parallelism = 32`
        
    - Значение по умолчанию: `32`.
2. **`dag_concurrency`**:
    
    - Лимит на максимальное количество задач, которые могут одновременно выполняться в **одном DAG**.
    - Настраивается в `airflow.cfg`:
        
        `dag_concurrency = 16`
        
    - Значение по умолчанию: `16`.
3. **`max_active_tasks_per_dag`**:
    
    - Максимальное количество активных задач для **одного DAG**. Этот параметр указывается в самом DAG:
        
		
 `from airflow.models import DAG`

`dag = DAG(`
    `"example_dag",`
    `max_active_tasks=5,  # Ограничение на задачи в рамках этого DAG`
    `...`
`)`

- Значение по умолчанию: нет ограничения, используется `dag_concurrency`.
4. **`pools`**:
    
    - Airflow позволяет создавать **пулы ресурсов**. Это ограничивает количество задач, использующих определённые ресурсы (например, CPU, API и т.д.).
    - Можно управлять пулами через Web UI или в DAG'е:
        
        `task = BashOperator(     task_id="example_task",     pool="my_pool",     ... )`
        

---

### Расчёт параллельности

Параллельность будет ограничена минимальным значением из:

- `parallelism` (глобальный лимит),
- `dag_concurrency` (лимит на DAG),
- `max_active_tasks_per_dag` (опционально в DAG),
- свободными ресурсами пула (если используется).

Например:

- `parallelism = 16`, `dag_concurrency = 8`, `max_active_tasks = 4`.  
    Тогда в одном DAG можно запустить не больше 4 задач, а глобально — до 16 задач (с учётом всех DAG'ов).

---

### Как узнать текущую настройку?

Проверь файл `airflow.cfg`:


`cat ~/airflow/airflow.cfg | grep -E 'parallelism|dag_concurrency'`

---

### Как настроить оптимально?

- Если сервер имеет 8 ядер CPU, разумное значение для `parallelism` — `2 * (количество ядер)` (например, `16`).
- Для небольших DAG'ов можно уменьшить `dag_concurrency`, чтобы избежать перегрузки.