Кластер Greenplum состоит из:

- _master node_ («мастер-ноды» или «главного узла») — конечные пользователи подключаются к нему для выполнения запроса;
    
- _standby node_ («резервного узла») — он обеспечивает поддержку доступности для мастера;
    
- _segment nodes_ («узлов сегментов») — являются рабочими узлами, где находятся данные.
    

Мастер-нода получает запрос, инициированный пользователем, выполняет его компиляцию и оптимизацию, генерирует план параллельного запроса и распределяет его по узлу сегмента. После выполнения данные отправляются обратно на главный узел и, наконец, передаются пользователю.

### Основные компоненты кластера Greenplum:

1. **Master Node (Мастер-узел)**:
    
    - Управляющий узел, который координирует выполнение всех запросов.
    - Клиенты подключаются именно к нему и отправляют SQL-запросы.
    - Мастер-узел отвечает за планирование и распределение выполнения запросов на сегменты, а также за сбор результатов с них.
2. **Segment Nodes (Сегментные узлы)**:
    
    - Это рабочие узлы, которые хранят данные и выполняют запросы.
    - Данные в Greenplum распределены между сегментами, и каждый сегмент отвечает за свою часть данных.
    - Запросы обрабатываются параллельно на каждом сегменте, что позволяет системе быстро выполнять сложные аналитические запросы.
3. **Interconnect (Система обмена данными)**:
    
    - Это высокоскоростная сеть, которая связывает мастер и сегментные узлы, а также сами сегменты между собой.
    - Она позволяет передавать данные между узлами, когда это необходимо для выполнения запросов.

### Как работает кластер Greenplum?

Когда приходит запрос:

- **Мастер-узел** разбивает его на несколько частей и отправляет на сегменты.
- **Сегменты** выполняют каждую часть запроса параллельно, работая только со своей частью данных.
- **Interconnect** связывает узлы и передает данные между ними, если сегментам нужно обменяться результатами или объединить данные.

Таким образом, кластер Greenplum — это вся система, которая включает мастер-узел, множество сегментов и межузловую сеть. Вместе эти компоненты образуют мощную инфраструктуру для выполнения аналитических запросов на больших данных.